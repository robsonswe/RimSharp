<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Brushes.xaml"/>
        <ResourceDictionary Source="Colors.xaml"/> <!-- Include Colors for direct use if needed -->
    </ResourceDictionary.MergedDictionaries>

    <!-- Custom Border Style for RimWorld-like panels -->
    <Style x:Key="RimworldPanelBorder" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource RimworldDarkBeigeBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="BorderThickness" Value="2"/>
        <Setter Property="CornerRadius" Value="3"/>
        <Setter Property="Padding" Value="8"/>
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect Color="{StaticResource RimworldShadow}"
                                  Direction="320"
                                  ShadowDepth="2"
                                  BlurRadius="4"
                                  Opacity="0.3"/>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- RimWorld-style TextBox -->
    <Style x:Key="RimworldTextBox" TargetType="TextBox">
        <Setter Property="Background" Value="{StaticResource RimworldBeigeBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="5,3"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/> <!-- Optional: Basic error handling -->
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="ToolTip"
                        Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                               Path=(Validation.Errors)/ErrorContent}"/>
                <Setter Property="BorderBrush" Value="{StaticResource RimworldErrorBrush}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- RimWorld-style Watermark TextBox -->
    <Style x:Key="RimworldWatermarkTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource RimworldTextBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Grid>
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="2">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1"
                                                  Direction="270"
                                                  Color="{StaticResource RimworldTextBoxShadow}"
                                                  BlurRadius="1"
                                                  Opacity="0.5"/>
                            </Border.Effect>
                        </Border>
                        <ScrollViewer x:Name="PART_ContentHost"
                                      Background="Transparent"
                                      Focusable="false"
                                      HorizontalScrollBarVisibility="Hidden"
                                      VerticalScrollBarVisibility="Hidden"
                                      VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                      HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                      Padding="{TemplateBinding Padding}"/>
                        <TextBlock Text="{TemplateBinding Tag}"
                                   Foreground="{StaticResource RimworldLightBrownBrush}"
                                   IsHitTestVisible="False"
                                   Margin="6,3"
                                   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                   HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                   Panel.ZIndex="1">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <MultiDataTrigger>
                                        <MultiDataTrigger.Conditions>
                                            <Condition Binding="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}}" Value=""/>
                                            <!-- !!! USE THE CORRECT CONVERTER !!! -->
                                            <Condition Binding="{Binding Path=Tag, RelativeSource={RelativeSource TemplatedParent}, FallbackValue='', Converter={StaticResource IsNotNullOrEmptyConverter}}" Value="True"/>
                                             <!-- Removed TargetNullValue and Parameter, handled by converter -->
                                             <!-- Added FallbackValue as good practice -->
                                        </MultiDataTrigger.Conditions>
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </MultiDataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>

                        </TextBlock>
                    
                    
                    </Grid>
                     <ControlTemplate.Triggers>
                        <Trigger Property="Validation.HasError" Value="true">
                             <Setter Property="ToolTip"
                                    Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                                            Path=(Validation.Errors)/ErrorContent}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource RimworldErrorBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- RimWorld-style ListBox Item Style -->
    <!-- Moved from ModsView as it's likely the standard look for list items -->
     <Style x:Key="RimworldListBoxItemStyle" TargetType="ListBoxItem">
        <Setter Property="Padding" Value="5,4"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="BorderBrush" Value="{StaticResource RimworldBrownBrush}"/> <!-- Subtle separator -->
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/> <!-- Remove dotted focus rectangle -->
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="Bd"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}"
                            Padding="{TemplateBinding Padding}"
                            SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Background" TargetName="Bd" Value="{StaticResource RimworldDarkBeigeBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource RimworldBrownBrush}"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="true">
                            <Setter Property="Background" TargetName="Bd" Value="{StaticResource RimworldLightBrownBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource RimworldWhiteBrush}"/>
                        </Trigger>
                        <!-- MultiTrigger for Selected + MouseOver (optional, if you want a different look) -->
                        <!-- <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsSelected" Value="True"/>
                                <Condition Property="IsMouseOver" Value="True"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="Bd" Value="{StaticResource RimworldHighlightBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource RimworldDarkBrownBrush}"/>
                        </MultiTrigger> -->
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- RimWorld-style ListBox -->
    <Style x:Key="RimworldListBox" TargetType="ListBox">
        <Setter Property="Background" Value="{StaticResource RimworldBeigeBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource RimworldBrownBrush}"/> <!-- Default text color for items -->
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/> <!-- Ensure items stretch -->
        <Setter Property="ItemContainerStyle" Value="{StaticResource RimworldListBoxItemStyle}"/>
        <Setter Property="AllowDrop" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBox">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3">
                        <ScrollViewer Focusable="False" Padding="{TemplateBinding Padding}" CanContentScroll="True">
                            <ItemsPresenter/>
                        </ScrollViewer>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- RimWorld-style ComboBox -->
    <Style x:Key="RimworldComboBox" TargetType="ComboBox">
        <Setter Property="Background" Value="{StaticResource RimworldBeigeBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="6,3"/>
        <!-- Add more template/styling details if needed -->
    </Style>

    <!-- RimWorld-style Window Background -->
    <Style x:Key="RimworldWindowStyle" TargetType="Window">
        <Setter Property="Background" Value="{StaticResource RimworldBeigeBrush}"/>
        <Setter Property="Foreground" Value="{StaticResource RimworldBrownBrush}"/> <!-- Default text color for window -->
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <!-- Other default window properties -->
    </Style>

    <!-- Styles for list header -->
    <Style x:Key="RimworldListHeaderBorder" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource RimworldLightBrownBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Padding" Value="7,5"/>
    </Style>

    <!-- Style for mod info panel header (Specific name, might keep closer to view if only used there) -->
    <!-- Let's keep it general for now -->
    <Style x:Key="RimworldInfoHeaderBorder" TargetType="Border">
        <Setter Property="Background" Value="{StaticResource RimworldBrownBrush}"/>
        <Setter Property="Padding" Value="10"/> <!-- Reduced padding slightly from 20 -->
        <!-- Add text styles if needed -->
    </Style>

    <!-- Hyperlink Style for consistency -->
    <Style x:Key="RimworldHyperlinkStyle" TargetType="Hyperlink">
         <Setter Property="Foreground" Value="{StaticResource RimworldDarkGreenBrush}"/>
         <Setter Property="TextDecorations" Value="None"/>
         <Style.Triggers>
             <Trigger Property="IsMouseOver" Value="True">
                 <Setter Property="Foreground" Value="{StaticResource RimworldDarkGreenHoverBrush}"/>
                 <Setter Property="TextDecorations" Value="Underline"/>
             </Trigger>
         </Style.Triggers>
    </Style>

</ResourceDictionary>