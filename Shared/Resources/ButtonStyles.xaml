<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:converters="clr-namespace:RimSharp.Core.Converters">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Shared/Resources/Brushes.xaml"/>
        <ResourceDictionary Source="/Shared/Resources/Colors.xaml"/>
        <ResourceDictionary Source="/Shared/Resources/Converters.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <!-- RimWorld-style Base Button -->
    <Style x:Key="RimworldButtonStyle" TargetType="Button">
        <Setter Property="Foreground" Value="{StaticResource RimworldWhiteBrush}"/>
        <Setter Property="Padding" Value="8,4"/>
        <Setter Property="MinWidth" Value="80"/>
        <Setter Property="MinHeight" Value="24"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/> <!-- Remove dotted focus rectangle -->
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <!-- Base button with slight offset shadow effect -->
                        <Border x:Name="ButtonBackground"
                                Background="{StaticResource RimworldBrownBrush}"
                                BorderBrush="{StaticResource RimworldDarkBrownBrush}"
                                BorderThickness="1"
                                CornerRadius="3"
                                Margin="0,0,0,2"> <!-- Bottom margin creates "depth" -->
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource RimworldShadow}"
                                                  Direction="320"
                                                  ShadowDepth="1"
                                                  BlurRadius="2"
                                                  Opacity="0.3"/>
                            </Border.Effect>
                        </Border>

                        <!-- Content -->
                        <Border Background="Transparent"
                                BorderBrush="{StaticResource RimworldDarkBrownBrush}"
                                BorderThickness="1"
                                CornerRadius="3"
                                Margin="0,0,0,2">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldLightBrownBrush}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <!-- Simulate button press by removing margin and maybe slightly changing color -->
                            <Setter Property="Margin" TargetName="ButtonBackground" Value="0,1,0,1"/>
                             <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldDarkBrownBrush}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldLightBrownBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource RimworldDarkBrownBrush}"/>
                            <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- RimWorld-style Save Button -->
    <Style x:Key="RimworldSaveButtonStyle" TargetType="Button" BasedOn="{StaticResource RimworldButtonStyle}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Border x:Name="ButtonBackground"
                                Background="{StaticResource RimworldDarkGreenBrush}"
                                BorderBrush="{StaticResource RimworldDarkGreenBorderBrush}"
                                BorderThickness="1"
                                CornerRadius="3"
                                Margin="0,0,0,2">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource RimworldShadow}"
                                                  Direction="320"
                                                  ShadowDepth="1"
                                                  BlurRadius="2"
                                                  Opacity="0.3"/>
                            </Border.Effect>
                        </Border>
                        <Border Background="Transparent"
                                BorderBrush="{StaticResource RimworldDarkGreenBorderBrush}"
                                BorderThickness="1"
                                CornerRadius="3"
                                Margin="0,0,0,2">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"
                                              TextElement.Foreground="{TemplateBinding Foreground}"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldDarkGreenHoverBrush}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Margin" TargetName="ButtonBackground" Value="0,1,0,1"/>
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldDarkGreenBorderBrush}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldDarkGreenDisabledBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource RimworldGrayBrush}"/>
                            <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- RimWorld-style Run Button -->
    <Style x:Key="RimworldRunButtonStyle" TargetType="Button" BasedOn="{StaticResource RimworldButtonStyle}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Border x:Name="ButtonBackground"
                                Background="{StaticResource RimworldRedBrush}"
                                BorderBrush="{StaticResource RimworldRedBorderBrush}"
                                BorderThickness="1"
                                CornerRadius="3"
                                Margin="0,0,0,2">
                            <Border.Effect>
                                <DropShadowEffect Color="{StaticResource RimworldShadow}"
                                                  Direction="320"
                                                  ShadowDepth="1"
                                                  BlurRadius="2"
                                                  Opacity="0.3"/>
                            </Border.Effect>
                        </Border>
                        <Border Background="Transparent"
                                BorderBrush="{StaticResource RimworldRedBorderBrush}"
                                BorderThickness="1"
                                CornerRadius="3"
                                Margin="0,0,0,2">
                             <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}"
                                              TextElement.Foreground="{TemplateBinding Foreground}"/>
                        </Border>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldRedHoverBrush}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Margin" TargetName="ButtonBackground" Value="0,1,0,1"/>
                             <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldRedBorderBrush}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldRedDisabledBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource RimworldGrayBrush}"/>
                             <Setter Property="Opacity" Value="0.6"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
        <!-- Remove Icon Style -->
        <Style x:Key="RemoveButtonStyle" TargetType="Button" BasedOn="{StaticResource SmallUtilityButtonStyle}">
            <Setter Property="Foreground" Value="{StaticResource RimworldRedBrush}"/>
            <Setter Property="Content" Value="✕"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="Transparent">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    <!-- RimWorld-style Tab Buttons -->
    <Style x:Key="RimworldTabButtonStyle" TargetType="Button">
        <Setter Property="Foreground" Value="{StaticResource RimworldWhiteBrush}"/>
        <Setter Property="Padding" Value="12,6"/>
        <Setter Property="MinWidth" Value="80"/>
        <Setter Property="FontWeight" Value="Medium"/>
        <Setter Property="Margin" Value="0,0,5,0"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <!-- IsEnabled Binding remains the same, using the global converter now -->
        <Setter Property="IsEnabled">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource InequalityConverter}">
                    <Binding Path="DataContext.SelectedTab" RelativeSource="{RelativeSource AncestorType={x:Type Window}}"/>
                    <Binding Path="CommandParameter" RelativeSource="{RelativeSource Self}"/>
                </MultiBinding>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <Border x:Name="ButtonBackground"
                                Background="{StaticResource RimworldLightBrownBrush}"
                                BorderBrush="{StaticResource RimworldBrownBrush}"
                                BorderThickness="1,1,1,0"
                                CornerRadius="3,3,0,0">
                        </Border>
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Margin="{TemplateBinding Padding}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                         <!-- Active Tab Style (when IsEnabled is False due to binding) -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldBrownBrush}"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                             <!-- Ensure foreground is still readable -->
                             <Setter Property="Foreground" Value="{StaticResource RimworldWhiteBrush}"/>
                        </Trigger>
                        <!-- Hover Style (Only when Enabled) -->
                         <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsEnabled" Value="True"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" TargetName="ButtonBackground" Value="{StaticResource RimworldDarkBeigeBrush}"/>
                            <Setter Property="Foreground" Value="{StaticResource RimworldDarkBrownBrush}"/> <!-- Change text color on hover -->
                        </MultiTrigger>
                        <!-- Pressed Style (Not really applicable/visible for tabs, but can add if desired) -->
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Style for list header buttons (from ModsView) - Generalizing -->
    <Style TargetType="Button" x:Key="SmallUtilityButtonStyle" BasedOn="{StaticResource RimworldButtonStyle}">
        <Setter Property="Width" Value="30"/>
        <Setter Property="MinWidth" Value="30"/> <!-- Override base MinWidth -->
        <Setter Property="Padding" Value="0"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <!-- Add specific icon/content properties if needed -->
    </Style>

    <!-- Style for arrow buttons between lists (from ModsView) - Generalizing -->
    <Style TargetType="Button" x:Key="ArrowButtonStyle" BasedOn="{StaticResource RimworldButtonStyle}">
        <Setter Property="Width" Value="30"/>
        <Setter Property="Height" Value="30"/>
        <Setter Property="MinWidth" Value="30"/> <!-- Override base MinWidth -->
        <Setter Property="MinHeight" Value="30"/> <!-- Override base MinHeight -->
        <Setter Property="Margin" Value="5,0"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontWeight" Value="Bold"/>
    </Style>

     <!-- Downloader Specific Button Style (from DownloaderView) -->
     <!-- If only margin/padding differs, consider just setting those properties directly -->
     <!-- Or keep it if it represents a distinct functional category -->
    <Style TargetType="Button" x:Key="DownloaderButtonStyle" BasedOn="{StaticResource RimworldButtonStyle}">
        <Setter Property="Margin" Value="0,0,5,0"/>
        <!-- Padding is same as base, so no need to redefine unless different -->
        <!--<Setter Property="Padding" Value="8,4"/>-->
    </Style>


</ResourceDictionary>